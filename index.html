<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="오늘뿐인 나(OBN) - 스마트 투두 리마인더. 주간 달력, D-Day 카운트다운, 반복 할 일, 푸시 알림으로 오늘 하루를 완벽하게.">
  <meta property="og:title" content="오늘뿐인 나 (OBN)">
  <meta property="og:description" content="스마트 투두 리마인더. 주간 달력, D-Day 카운트다운, 반복 할 일, 푸시 알림으로 오늘 하루를 완벽하게.">
  <meta property="og:type" content="website">
  <meta name="theme-color" content="#3498DB">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="오늘뿐인 나">
  <link rel="icon" type="image/png" sizes="32x32" href="icon-32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">
  <link rel="manifest" href="manifest.json">
  <title>오늘뿐인 나 (OBN)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard/dist/web/static/pretendard.css">
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div id="app">

    <!-- D-Day 카운트다운 -->
    <section id="dday-section">
      <div id="dday-container">
        <!-- D-Day 카드들이 여기에 동적으로 생성됨 -->
      </div>
      <button id="btn-add-dday" class="dday-add-btn" aria-label="D-Day 추가">
        ＋ D-Day 추가
      </button>
    </section>

    <!-- 헤더: 앱 타이틀, 날짜, 진행률 -->
    <header id="header">
      <h1 class="app-title">오늘뿐인 나</h1>
      <p id="today-date"></p>
      <div class="progress-wrapper" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
        <div class="progress-bar">
          <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
        </div>
        <span id="progress-text">0/0 완료 (0%)</span>
      </div>
    </header>

    <!-- 주간 달력 -->
    <section id="weekly-calendar">
      <div class="week-nav">
        <button id="btn-prev-week" class="week-nav-btn" aria-label="이전 주">‹</button>
        <button id="btn-week-range" class="week-range-btn" aria-label="이번 주로 이동">
          <!-- JS에서 "2월 16일 ~ 22일" 텍스트 채움 -->
        </button>
        <button id="btn-next-week" class="week-nav-btn" aria-label="다음 주">›</button>
      </div>
      <div class="week-grid">
        <div class="week-header">
          <span class="week-day-label">월</span>
          <span class="week-day-label">화</span>
          <span class="week-day-label">수</span>
          <span class="week-day-label">목</span>
          <span class="week-day-label">금</span>
          <span class="week-day-label sat">토</span>
          <span class="week-day-label sun">일</span>
        </div>
        <div class="week-dates" id="week-dates-row">
          <!-- JS에서 7개 날짜 셀 동적 생성 -->
        </div>
        <div class="week-schedules" id="week-schedules-row">
          <!-- JS에서 각 날짜별 스케줄 바 동적 생성 -->
        </div>
      </div>
    </section>

    <!-- 필터: 카테고리별 탭 -->
    <div class="filter-tabs-wrapper">
      <nav id="filter-tabs" aria-label="카테고리 필터">
        <button class="filter-tab active" data-filter="전체">전체</button>
        <button class="filter-tab" data-filter="직장">🏢 직장</button>
        <button class="filter-tab" data-filter="공부">📚 공부</button>
        <button class="filter-tab" data-filter="운동">🏋️ 운동</button>
        <button class="filter-tab" data-filter="식사">🍜 식사</button>
        <button class="filter-tab" data-filter="약속">🤝 약속</button>
        <button class="filter-tab" data-filter="행사">🎉 행사</button>
        <button class="filter-tab" data-filter="약 복용">💊 약 복용</button>
        <button class="filter-tab" data-filter="recurring">🔁 반복</button>
      </nav>
    </div>

    <!-- 리스트: 할 일 아이템 (app.js에서 동적 생성) -->
    <main id="todo-list" aria-label="할 일 목록" role="list">
      <p class="empty-message">오늘 할 일을 추가해보세요! ✨</p>
    </main>

    <!-- 하단: 완료 삭제, 알림 토글 -->
    <footer id="footer-actions">
      <button id="clear-completed-btn" aria-label="완료된 항목 모두 삭제">완료 항목 모두 삭제</button>
      <button id="notification-toggle" aria-label="알림 켜기/끄기">🔕 알림 OFF</button>
    </footer>

    <!-- FAB: 계획 추가 버튼 -->
    <button id="fab-plan" class="fab-plan" aria-label="계획 추가">
      <span class="fab-icon">🗓</span>
      <span class="fab-text">계획</span>
    </button>

  </div>

  <!-- 계획 추가 바텀시트 -->
  <div id="plan-overlay" class="plan-overlay" style="display:none;"></div>
  <div id="plan-sheet" class="plan-sheet" style="display:none;">
    <div class="plan-sheet-handle">
      <div class="plan-handle-bar"></div>
    </div>
    <div class="plan-sheet-header">
      <h3 class="plan-sheet-title">📝 계획 추가</h3>
      <button id="btn-plan-close" class="plan-close-btn" aria-label="닫기">✕</button>
    </div>
    <div class="plan-sheet-body">
      <div class="plan-field">
        <label class="plan-label" for="plan-todo-input">할 일</label>
        <input type="text" id="plan-todo-input" class="plan-input"
               placeholder="할 일을 입력하세요" maxlength="100">
      </div>
      <div class="plan-field">
        <label class="plan-label" for="plan-date-input">날짜</label>
        <input type="date" id="plan-date-input" class="plan-input">
      </div>
      <div class="plan-row">
        <div class="plan-field plan-field-half">
          <label class="plan-label" for="plan-category">카테고리</label>
          <select id="plan-category" class="plan-select">
            <option value="work">🏢 직장</option>
            <option value="study">📚 공부</option>
            <option value="exercise">🏋️ 운동</option>
            <option value="meal">🍜 식사</option>
            <option value="appointment">🤝 약속</option>
            <option value="event">🎉 행사</option>
            <option value="medicine">💊 약 복용</option>
          </select>
        </div>
        <div class="plan-field plan-field-half">
          <label class="plan-label" for="plan-priority">우선순위</label>
          <select id="plan-priority" class="plan-select">
            <option value="high">🔴 높음</option>
            <option value="medium" selected>🟡 중간</option>
            <option value="low">🟢 낮음</option>
          </select>
        </div>
      </div>
      <div class="plan-field">
        <label class="plan-recurring-label">
          <input type="checkbox" id="plan-recurring" class="plan-recurring-check">
          <span>🔁 매일 반복</span>
        </label>
      </div>
      <button id="btn-plan-add" class="plan-add-btn">추가</button>
    </div>
  </div>

  <!-- D-Day 추가 모달 -->
  <div id="dday-modal" class="modal-overlay" style="display:none;">
    <div class="modal-content">
      <h3 class="modal-title">🎯 D-Day 추가</h3>
      <div class="modal-body">
        <label class="modal-label">시험/목표 이름</label>
        <input type="text" id="dday-title-input" class="modal-input"
               placeholder="예: 토익 시험" maxlength="30">

        <label class="modal-label">목표 날짜</label>
        <input type="date" id="dday-date-input" class="modal-input">

        <label class="modal-label">이모지 선택</label>
        <div id="emoji-picker" class="emoji-picker">
          <button class="emoji-btn active" data-emoji="🎯" aria-label="목표 이모지">🎯</button>
          <button class="emoji-btn" data-emoji="📝" aria-label="시험 이모지">📝</button>
          <button class="emoji-btn" data-emoji="💻" aria-label="코딩 이모지">💻</button>
          <button class="emoji-btn" data-emoji="🏆" aria-label="우승 이모지">🏆</button>
          <button class="emoji-btn" data-emoji="🚗" aria-label="운전 이모지">🚗</button>
          <button class="emoji-btn" data-emoji="🎓" aria-label="졸업 이모지">🎓</button>
        </div>
      </div>
      <div class="modal-actions">
        <button id="btn-dday-cancel" class="modal-btn modal-btn-cancel" aria-label="D-Day 추가 취소">취소</button>
        <button id="btn-dday-save" class="modal-btn modal-btn-save" aria-label="D-Day 저장">저장</button>
      </div>
    </div>
  </div>

  <script src="storage.js"></script>
  <script src="dday.js"></script>
  <script src="weekly.js"></script>
  <script src="app.js"></script>
  <script src="notification.js"></script>
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./sw.js');
    }
  </script>
</body>
</html>
